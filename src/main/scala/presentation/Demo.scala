package com.github.morotsman
package presentation

import cats.FlatMap
import cats.effect.Temporal
import cats.implicits._

import scala.annotation.tailrec
import scala.concurrent.duration.DurationInt

case class CircuitBreakerDemo[F[_] : FlatMap: Temporal](console: Console[F]) extends Slide[F] {
  override def show(): F[Unit] = {

    val animation = List(
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin,
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     |1|                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     |1|                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  |1|                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___|1|                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|_1_| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|_1_|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|_1_|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|_1_|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <_1_|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       |1< <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       |1|\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       |1|                     | |                                                                    | |                     | |
        |       | |                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET),
      """
        |           __   Success                                                                                   __  call / raise circuit open
        |        _ / /__ ___ ___ ___ ___ _                                                                      _ / /__ ___ ___ ___ ___ _
        |       | < <___|___|___|___|___| |                                                                    | < <___|___|___|___|___| |
        |       | |\_\                  | |                                                                    | |\_\                  | |
        |       | |                     | |                                                                    | |                     | |
        |       |1|                     | |                                                                    | |                     | |
        |  ___ _|_|___ ___ ___ ___ ___ _|_|___ ___           fail (threshold reached)               __    ___ _|_|___ ___ ___ ___ ___ _|_|___ ___
        | |___|___|___|___|___|___|___|___|___|___|      ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___\ \  |___|___|___|___|___|___|___|___|___|___|
        | |_|     ___ _    ___  ___ ___ ___     |_|      ___|___|___|___|___|___|___|___|___|___|___ > > |_|         ___  ___ ___ _  _         |_|
        | | |    / __| |  / _ \/ __| __|   \    | |     __                                          /_/  | |        / _ \| _ \ __| \| |        | |
        | | |   | (__| |_| (_) \__ \ _|| |) |   | |    / /___ ___ _                                      | |       | (_) |  _/ _|| .` |        | |
        | | |    \___|____\___/|___/___|___/    | |   < < ___|___| |                                     | |        \___/|_| |___|_|\_|        | |
        | |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|    \_\       | |                                     |_|_ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        | |___|___|___|___|___|___|___|___|___|___|              | |                                     |___|___|___|___|___|___|___|___|___|___|
        |     | |                     | |                        | |
        |     | | __                  | |                        | |                                         / \                 reset timeout
        |     | |/ /__ ___ ___ ___ ___| |                        | |                                        /| |\                    | |
        |     |_< <___|___|___|___|___|_|                        | |                                         | |                     | |
        |        \_\                                             | |                                         | |                     | |
        |           fail (under treshold)                        | |                                         |_|                     |_|
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                     | |
        |                                                        | |                                         | |                    \|_|/
        |                                                        | |                                        fail                     \ /
        |                                                        | |                            ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___
        |                                                        | |                           |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |                                                        | |___ ___ ___ ___ ___ ___    |_|   _  _   _   _    ___    ___  ___ ___ _  _    |_|
        |                                                        |_ ___|___|___|___|___|___|   | |  | || | /_\ | |  | __|  / _ \| _ \ __| \| |   | |
        |                                                               Success                | |  | __ |/ _ \| |__| _|  | (_) |  _/ _|| .` |   | |
        |                                                                                      | |  |_||_/_/ \_\____|_|    \___/|_| |___|_|\_|   | |
        |                                                                                      |_|_ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ ___ _|_|
        |                                                                                      |___|___|___|___|___|___|___|___|___|___|___|___|___|
        |
        |
        |""".stripMargin.replaceAll("1", Colors.ANSI_GREEN + "*" + Colors.ANSI_RESET)
    )

    def animate(frame: Int): F[Unit] = for {
      _ <- console.writeString(animation(frame))
      _ <- Temporal[F].sleep(500.milli)
      _ <- console.clear()
      _ <- animate(if (frame < animation.size - 1) frame + 1 else 0)
    } yield ()


    animate(0)
  }
}



